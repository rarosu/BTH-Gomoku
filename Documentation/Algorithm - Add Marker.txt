
/**
	Cell C
	Player P
*/
AddMarker(C, P):
	if (mMarkers[C] != C_PLAYER_NONE):
		return
	mMarkers[C] = P
	
	for half of all directions D:
		N = Neighbour(C, D)
		if (mMarkers[N] == P):
			bool CreateNewRow := true
			foreach row R in grid:
				if (R.CanAddMarker(C)):
					R.AddMarker(C)
					
					CreateNewRow := false
					break
			if (CreateNewRow):
				Row R := new Row
				R.Add(C)
				R.Add(N)